% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_nass_census_data.R
\name{get_nass_census_data}
\alias{get_nass_census_data}
\title{Prepare USDA NASS Census Data for Release}
\usage{
get_nass_census_data(
  censuses = c(2022, 2017, 2012, 2007, 2002),
  dir_source = "./data-raw/fastscratch/nass/",
  dir_dest = "data-raw/data_release/nass/"
)
}
\arguments{
\item{censuses}{Integer vector. One or more census years to process
(e.g. \code{c(2022, 2017, 2012, 2007, 2002)}).}

\item{dir_source}{Character. Path to the directory containing raw NASS Quick Stats
census datasets (default: \code{"./data-raw/fastscratch/nass/"}).}

\item{dir_dest}{Character. Directory where the processed RDS files will be saved
(default: \code{"data-raw/data_release/nass/"}).}
}
\value{
Character vector of all \code{nass_census_*.rds} filenames written to \code{dir_dest}.
}
\description{
Iterates over one or more USDA NASS census years, fetching each via
\code{process_nass_dataset()}, and produces three sets of state-level and county-level summaries for each year:
\enumerate{
\item Agricultural land metrics by state,
\item Crop insurance totals by state and county,
\item Broad Farm Registry (BRF) census summaries by state and national level.
}
}
\details{
For each year in \code{censuses}, the function:
First, it calls
\code{process_nass_dataset()} with the \code{large_dataset = paste0("census", census)} argument
to load the raw census data into a \code{data.table}, then renames \code{commodity_year} to
\code{census_year}. It then performs three blocks of aggregation:
\enumerate{
\item \strong{Agricultural Land by State}
Filters for ECONOMICS-sector state-level records on cropland, pasture, woodland,
and cropland share, cleans and converts the \code{value} field to numeric, computes
the mean by \verb{(census_year, state_code, short_desc)}, recodes \code{short_desc} to
simple labels (\code{cropland}, \code{pasture}, \code{woodland}, \code{cropland_pct}), pivots wide
with \code{data.table::dcast()}, coerces \code{census_year} and \code{state_code} to numeric,
and saves \verb{nass_census_agLand_state_<census>.rds}.
\item \strong{Crop Insurance Summaries}
Subsets for both cropland and crop-insurance acreage and operation counts plus
several farm-related income receipt categories, strips commas and coerces \code{value}
to numeric, drops invalid entries, converts location codes to numeric, filters
to insurance-related domains, sums \code{value} by all relevant grouping fields, and
saves \verb{nass_census_insurance_data_<census>.rds}.
\item \strong{BRF Census Aggregates}
Filters for producer counts and acres (owned vs. rented), converts \code{value} to
numeric, removes zeros and missing, first computes group-wise means and then sums
across \verb{(census_year, state_code, state_alpha, agg_level_desc, unit_desc, domaincat_desc)}, recodes \code{domaincat_desc} to \code{ALL_} or \code{BRF_} plus unit,
pivots wide, reorders and renames columns, and saves
\verb{nass_census_brf_<census>.rds}.
}
}
\seealso{
\itemize{
\item \code{\link{process_nass_dataset}} for loading raw Quick Stats data
}

Other USDA NASS Quick Stats: 
\code{\link{downloaded_nass_large_datasets}()},
\code{\link{process_nass_dataset}()}
}
\concept{USDA NASS Quick Stats}
